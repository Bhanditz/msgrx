(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{147:function(e,t,a){},208:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},220:function(e,t,a){e.exports=a(490)},225:function(e,t,a){},227:function(e,t,a){},299:function(e,t){},301:function(e,t){},333:function(e,t){},490:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(9),c=a.n(o),i=(a(225),a(52)),s=a(53),l=a(55),u=a(54),d=a(56),p=(a(208),a(227),a(70),a(24)),m=(a(83),a(81)),g=(a(234),a(10)),h=(a(206),a(80)),f=(a(251),a(59)),b=a(25),y=(a(254),a(104)),v=(a(207),a(58)),E=(a(147),a(144)),j=a.n(E),O=(a(491),a(213)),w=a(105),k=a(106),x=a(146),S=v.a.Item,_=r.a.createContext(),I=v.a.create()(function(e){var t=e.form,a=(e.index,Object(x.a)(e,["form","index"]));return r.a.createElement(_.Provider,{value:t},r.a.createElement("tr",a))}),R=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={editing:!1},a.toggleEdit=function(){var e=!a.state.editing;a.setState({editing:e},function(){e&&a.input.focus()})},a.handleClickOutside=function(e){a.state.editing&&a.cell!==e.target&&!a.cell.contains(e.target)&&a.save()},a.save=function(){var e=a.props,t=e.record,n=e.handleSave;a.form.validateFields(function(e,r){e||(a.toggleEdit(),n(Object(k.a)({},t,r)))})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.editable&&document.addEventListener("click",this.handleClickOutside,!0)}},{key:"componentWillUnmount",value:function(){this.props.editable&&document.removeEventListener("click",this.handleClickOutside,!0)}},{key:"render",value:function(){var e=this,t=this.state.editing,a=this.props,n=a.editable,o=a.dataIndex,c=a.title,i=a.record,s=(a.index,a.handleSave,Object(x.a)(a,["editable","dataIndex","title","record","index","handleSave"]));return r.a.createElement("td",Object.assign({ref:function(t){return e.cell=t}},s),n?r.a.createElement(_.Consumer,null,function(a){return e.form=a,t?r.a.createElement(S,{style:{margin:0}},a.getFieldDecorator(o,{rules:[{required:!0,message:"".concat(c," is required.")}],initialValue:i[o]})(r.a.createElement(m.a,{ref:function(t){return e.input=t},onPressEnter:e.save}))):r.a.createElement("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:e.toggleEdit},s.children)}):s.children)}}]),t}(r.a.Component),C=(r.a.Component,v.a.Item),L=y.a.Header,N=y.a.Content,P={blockchain:"eos",protocol:"https",host:"nodes.get-scatter.com",port:"443",chainId:"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906"},q="trustbetinfo",F=[{title:"ID",dataIndex:"pid",key:"pid",align:"center"},{title:"\u8d26\u53f7",dataIndex:"account",key:"account",align:"center"},{title:"\u8fd4\u73b0\u7387(\u4e07\u5206\u4e4b)",dataIndex:"rate",key:"rate",align:"center"},{title:"\u64cd\u4f5c",dataIndex:"operation",key:"operation",align:"center"}],D={onChange:function(e,t){console.log("onChange:","selectedRowKeys: ".concat(e),"selectedRows: ",t)}},T=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).hasErrors=function(e){return Object.keys(e).some(function(t){return e[t]})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e||(a.state.is_login&&q===a.state.login_account?a.scatter.eos(P,j.a,{}).contract(q).then(function(e){e.addpart(t.partName,t.partRate,a.trx_option).then(function(e){a.getPartners(),f.a.success("\u6dfb\u52a0\u6210\u529f~")})}).catch(function(e){console.error(e)}):f.a.error("\u8bf7\u767b\u5f55".concat(q,"\u8d26\u53f7\u8fdb\u884c\u8be5\u64cd\u4f5c\uff01")))})},a.pay=function(){f.a.info("\u53d1\u8d77\u7ed3\u7b97")},a.getPartners=function(){a.eosjs.getTableRows({json:!0,code:q,scope:q,table:"parts"}).then(function(e){e.rows&&e.rows.length>0&&(a.setState({partners:e.rows}),a.getRecords(e.rows,0))}).catch(function(e){console.error(e)})},a.getRecords=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;a.eosjs.getTableRows({json:!0,code:q,scope:e[t++].partner,table:"records"}).then(function(n){a.setState(function(e){var t=e.records;return t.push(n.rows),{records:t}}),t<e.length&&a.getRecords(e,t)}).catch(function(e){console.error(e)})},a.accountLoginLogout=function(){null!==a.scatter?a.state.is_login&&a.scatter&&a.scatter.identity?a.scatter.forgetIdentity().then(function(){a.setState({is_login:!1}),a.setState({login_account:"Login"})}):a.state.is_login||!a.scatter||a.scatter.identity||a.scatter.getIdentity({accounts:[P]}).then(function(){var e=a.scatter.identity.accounts.find(function(e){return"eos"===e.blockchain});e.name!==q&&f.a.warning("\u8be5\u8d26\u53f7\u4e0d\u662f\u7ba1\u7406\u5458\u8d26\u53f7"),a.trx_option={authorization:["".concat(e.name,"@").concat(e.authority)]},a.setState({login_account:e.name}),a.setState({is_login:!0})}):f.a.info("\u8bf7\u5148\u5b89\u88c5\u6216\u89e3\u9501Scatter")},a.state={is_login:!1,login_account:"Login",partners:[],records:[]},a.trx_option=null,a.hasErrors=a.hasErrors.bind(Object(b.a)(Object(b.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(b.a)(Object(b.a)(a))),a.pay=a.pay.bind(Object(b.a)(Object(b.a)(a))),a.accountLoginLogout=a.accountLoginLogout.bind(Object(b.a)(Object(b.a)(a))),a.getPartners=a.getPartners.bind(Object(b.a)(Object(b.a)(a))),a.getRecords=a.getRecords.bind(Object(b.a)(Object(b.a)(a))),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){for(var e=this,t=[],a=this.state.partners,n=0;n<a.length;n++)t.push({key:n,pid:a[n].pid,account:a[n].partner,rate:a[n].rate,operation:"\u66f4\u65b0"});var o=this.props.form,c=o.getFieldDecorator,i=o.getFieldsError,s=o.getFieldError,l=o.isFieldTouched,u=l("partName")&&s("partName"),d=l("partRate")&&s("partRate");return r.a.createElement("div",null,r.a.createElement(y.a,{className:"layout"},r.a.createElement(L,null,r.a.createElement("a",{href:"#",onClick:this.accountLoginLogout,className:"login-logout"},!0===this.state.is_login?r.a.createElement("span",null,r.a.createElement(g.a,{type:"user"})," ",this.state.login_account):r.a.createElement("span",null,r.a.createElement(g.a,{type:"login"})," ",this.state.login_account)),r.a.createElement("a",{href:"#",onClick:this.pay,className:"login-logout"},r.a.createElement("span",null,r.a.createElement(g.a,{type:"user"})," \u7ed3\u7b97"))),r.a.createElement(N,null,r.a.createElement("div",{className:"add-partner"},r.a.createElement(v.a,{layout:"inline",onSubmit:this.handleSubmit},r.a.createElement(C,{validateStatus:u?"error":"",help:u||""},c("partName",{rules:[{required:!0,message:"Please input a partner name!"}]})(r.a.createElement(m.a,{prefix:r.a.createElement(g.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),type:"text",placeholder:"\u8d26\u53f7"}))),r.a.createElement(C,{validateStatus:d?"error":"",help:d||""},c("partRate",{rules:[{required:!0,message:"Please input a return rate!"}]})(r.a.createElement(m.a,{prefix:r.a.createElement(g.a,{type:"calculator",style:{color:"rgba(0,0,0,.25)"}}),type:"number",placeholder:"\u8fd4\u73b0\u7387"}))),r.a.createElement(C,null,r.a.createElement(p.a,{type:"primary",htmlType:"submit",disabled:this.hasErrors(i())},"\u6dfb\u52a0\u4ee3\u7406")))),r.a.createElement(h.a,{columns:F,dataSource:t,expandedRowRender:function(t){for(var a=[],n=t.pid,o=e.state.records[n],c=0;o&&c<o.length;c++)a.push({key:c,daytime:o[c].day,quantity:o[c].quantity});return r.a.createElement(h.a,{columns:[{title:"\u65e5\u671f",dataIndex:"daytime",key:"daytime",align:"center"},{title:"\u91d1\u989d(EOS)",dataIndex:"quantity",key:"quantity",align:"center"}],dataSource:a,rowSelection:D,pagination:!1})},pagination:!1,style:{width:"720px",margin:"30px auto"}}))))}},{key:"componentDidMount",value:function(){var e=this;this.props.form.validateFields(),this.eosjs=j()({httpEndpoint:"".concat(P.protocol,"://").concat(P.host,":").concat(P.port),chainId:P.chainId}),document.addEventListener("scatterLoaded",function(t){if(e.scatter=window.scatter,window.scatter=null,e.scatter&&e.scatter.identity){var a=e.scatter.identity.accounts.find(function(e){return"eos"===e.blockchain});a.name!==q&&f.a.warning("\u8be5\u8d26\u53f7\u4e0d\u662f\u7ba1\u7406\u5458\u8d26\u53f7"),e.trx_option={authorization:["".concat(a.name,"@").concat(a.authority)]},e.setState({login_account:a.name}),e.setState({is_login:!0})}}),this.getPartners()}}]),t}(n.Component),W=v.a.create()(T),z=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(W,null)}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[220,2,1]]]);
//# sourceMappingURL=main.c011c450.chunk.js.map